# 介绍——办公室门禁历史

似乎对于每一届的技术部人来说，研究自动开门已经是一个老传统了。从办公室门伤痕累累的洞眼和前届大佬们画的PCB板可以看出来大家都做了很多研究。我们在这里做一下文档整理也可以减少重复造轮子的过程，因为老前辈们的资料显然是找不到了。

我在门禁卡这个项目上也做了接近一年了，初版是仿照前辈们的做法，使用Arduino和继电器，不过在后来的使用过程中似乎是开门的瞬间电流太大导致整个系统不稳定宕机。接着我找到一个很投机的办法，就是使用舵机牵动门锁里面的拉杆开门，这个方法要有效的得多。至今我们办公室对面的508就是这个方法。

可能是因为我们办公室的人进出比较频繁，所以我们的门禁卡使用一段时间就挂机了。我初步猜测是因为舵机需要计时器不断控制，非常占用资源，所以我把舵机换成了步进电机，这个方法确实更加有效，但是还是会时不时宕机。由于那个时候已经是大二上学期末了，所以我就将其暂时搁置了，宕机了就重启。

后来我猜测可能是由于Arduino的AVR芯片太差，需要换一个更好的单片机。于是大二下学期开学我就把AVR单片机换成了**ESP32**，同时为了提高效率，减少单片机内存占用，我**添加了中断**，只有在有人的时候才会去检测NFC卡。同时我在这次的项目中加入了**WIFI**的功能，这样我们就可以在连接办公室网络的情况下开门了，即使没带门禁卡也没关系。其实呢，将ESP32**映射到公网**也是可以做到的，这个功能可以让大家在日后添加，我认为暂时没有必要，技术上也没什么难度。

这个版本也是目前的最新版本，但是我个人认为这个系统还有地方需要改进，等到日后有时间再说吧。

我会在下面介绍上面的几个版本。
